from architects import (
    buildbot_url,
    builders,
    git_poll,
    pb,
    schedulers,
    secrets,
    postgres,
    www,
)
from client import MasterClient


client = MasterClient()

BuildmasterConfig = {
    "title": "Pipeline",
    "buildbotURL": buildbot_url("0.0.0.0", 8010),
    "workers": client.workers,
    "protocols": pb(9989),
    "www": www(8010),
    "db": postgres("postgres", "default", "postgres", client.postgres)),
    "change_source": git_poll("git://github.com/JoelLefkowitz/pub.git", 10),
    "schedulers": schedulers,
    "builders": builders(client.worker_names),
}
